<html>
<title>Towers Of Hanoi</title>
</html>
<script>
function disc(size) {
  this.size = size;
  this.pos = 0;

  this.move = function(towers) {
    if(towers[this.pos][0] == this){
      i=this.pos;
      while(i=((i==2)?0:(i+1))){
        if(i == this.pos){
          break;
        }
        try{
          if(towers[i][0].size > this.size){
            towers[i].unshift(this);
            towers[this.pos].shift();
            this.pos = i;
            pos[this.size]=this.pos;
            break;
          }
        }catch(e){
          towers[i].unshift(this);
          towers[this.pos].shift();
          this.pos = i;
          pos[this.size]=this.pos;
          break;
        }
      }
    }
  }
}

function display(towers){
  for( i = 0; i < towers.length; i++){
    str = '';
    for( n = 0; n < towers[i].length; n++){
      str += '' + towers[i][n].size + " ";
    }
    console.log((str=='')?'-':str);
  }
  console.log("~~~~");
}

var towers = [[],[],[]];
var pos = [];
var cnt = 0b0;
var discs = prompt("Enter number of discs")-1+1;
for(i = 0; i<discs; i++){
  towers[0].push(new disc(i));
  pos.push(0);
}
display(towers);
for(i = 1; i < ((2**discs)-1);i++){
  if(i>10){
    break;
  }
  current = i.toString(2);
  last = (i-1).toString(2);
  for(n = 0; n < current.length; n++){
    try{
      if(current.charAt(n)=='1' && last.charAt(n) == '0'){
        index = n;
        break;
      }
    }catch(e){
      index = n;
      break;
    }
  }
  //towers[pos[index]][0].move(towers);
  display(towers);
  if(i>100){
    break;
  }
}
</script>
